# Flask Server
Server that store Stations and Animals data given over MQTT topic communication and expose API for managing animals meals and consult each data.

## Setup
Install python requirements packages:
```shell
pip install -r requirements.txt
```
## Config File
Need to write a config.ini file to run the bridge. An example below:
```ini
[Flask]
FLASK_RUN_HOST = 0.0.0.0
FLASK_RUN_PORT = 9000

[SQLAlchemy]
SQLALCHEMY_DATABASE_URI = sqlite:///db.sqlite

[MQTT]
Port = 1883
Server = broker.hivemq.com
UseCredentials =
Username =
Password =
Feed = HPMS/#
```
## Documentation
Documentation has been generated by Swagger, it's available from:
```text
/api/docs
```

## MQTT Topics
### Send
- Send Animals meals:
    ```text
    HPMS/users/{username}/stations/{station_id}/animals/{animal_id}/meals
    ```
### Receive
- Receive Animals beats:
    ```text
    HPMS/users/{username}/stations/{station_id}/animals/{animal_id}/beats
    ```
- Receive Animals weights:
    ```text
    HPMS/users/{username}/stations/{station_id}/animals/{animal_id}/weights
    ```
- Receive Station water level:
    ```text
    HPMS/users/{username}/stations/{station_id}/waters
    ```
- Receive Station food level:
    ```text
    HPMS/users/{username}/stations/{station_id}/foods
    ```
- Receive Animals barks:
    ```text
    HPMS/users/{username}/stations/{station_id}/animals/{animal_id}/barks
    ```
- Receive Animals temperatures:
    ```text
    HPMS/users/{username}/stations/{station_id}/animals/{animal_id}/temperatures
    ```
